<!DOCTYPE html>
<html>
<head>
    <title>Google Access Token Test</title>
    <script src="https://accounts.google.com/gsi/client"></script>
</head>
<body style="font-family: sans-serif; padding: 20px;">
    <h1>Google Access Token Generator</h1>
    <p>Use this to get the <b>ya29...</b> token for your backend.</p>

    <button id="auth_button" onclick="handleAuthClick();" style="padding: 15px 25px; background-color: #4285F4; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px;">
        Authorize & Get Token
    </button>

    <script>
        function handleAuthClick() {
            try {
                const client = google.accounts.oauth2.initTokenClient({
                    client_id: '122747006542-f1bblso2t4knkj8tl4sk9cmavnnbf751.apps.googleusercontent.com',
                    scope: 'https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile',
                    callback: (response) => {
                        if (response.access_token) {
                            document.getElementById('token-display').value = response.access_token;
                            console.log("Success! Access Token:", response.access_token);
                        } else {
                            console.error("No access token returned", response);
                        }
                    },
                });
                client.requestAccessToken();
            } catch (err) {
                console.error("Google Client Error:", err);
                alert("Error: Make sure you are running on http://localhost:8080 and Ad-blockers are off.");
            }
        }
    </script>

    <div style="margin-top: 20px;">
        <h3>Your Access Token:</h3>
        <textarea id="token-display" rows="8" cols="80" style="width: 100%; font-family: monospace;" readonly placeholder="ya29... will appear here"></textarea>
    </div>
</body>
</html>